@using HistoryOfScience.Components.Pages.Component
@using HistoryOfScience.Models

<div class="person-card-container flex-row" style="visibility: @(_showCatd);">
    <div class="flex-container-row">
        <h3 class="dont-margin">@Persona?.Name @Persona?.Surname @Persona?.Patronymic</h3>
        <div @onclick="(e) => close()" class="btn-close"/>
    </div>
    <div class="flex">
        <div class="flex-container-column">
            @foreach (PersonData data in _personDatas)
            {
                <div class="item-list nav-item px-3" @onclick="(e) => OnShowDataClick(data.Context)">
                    <a class="nav-link active">@data.TopicTitle</a>
                </div>
            }
        </div>
        <div class="content-container">
            <ContentCard Context="@_context"></ContentCard>
        </div>
    </div>
</div>

@code {
    [Parameter]
    public Personality? Persona { get; set; }

    private string _showCatd = "hidden";
    private List<PersonData> _personDatas;

    protected override void OnInitialized()
    {
        //запрос с сервера
        _personDatas = new List<PersonData>()
        {
            new PersonData()
            {
                Id = 1,
                PersonId = 1,
                TopicTitle = "Биография",
                Context = "14 марта 1879, Ульм, королевство Вюртемберг, Германская империя — 18 апреля 1955, Принстон, штат Нью-Джерси, США) — швейцарский, немецкий и американский физик-теоретик и общественный деятель-гуманист, один из основателей современной теоретической физики. Лауреат Нобелевской премии по физике 1921 года. Его теория относительности изменила основания физики, заменив классическую механику и закон всемирного тяготения Ньютона. Персона XX века по версии журнала Time[6]. Жил в Германии (1879—1895, 1914—1933), Швейцарии (1895—1914), и с 1933 года до конца жизни — в США. Из Германии с приходом к власти нацистов был вынужден эмигрировать, и после публичного отказа от гражданства Германии (весной 1933 года)[7] 24 марта 1934 года был его лишён[8][9][10]. Гражданин США с 1940 года. Почётный доктор около 20 ведущих университетов мира, член многих Академий наук, в том числе иностранный почётный член АН СССР (1926). Эйнштейн — автор более 300 научных работ по физике, а также около 150 книг и статей в области философии и истории науки, публицистики и других. Он разработал несколько фундаментальных физических теорий: Специальная теория относительности (1905). В её рамках — закон взаимосвязи массы и энергии: E=mc2. {displaystyle E=mc^{2}.} Общая теория относительности (1907—1916). Квантовая теория фотоэффекта. Квантовая теория теплоёмкости. Квантовая статистика Бозе — Эйнштейна. Статистическая теория броуновского движения, заложившая основы теории флуктуаций. Теория индуцированного излучения. Теория рассеяния света на термодинамических флуктуациях в среде[11]. Он также предсказал гравитационные волны и «квантовую телепортацию»[12], предсказал и измерил гиромагнитный эффект Эйнштейна — де Хааза. С 1933 года работал над проблемами космологии и единой теории поля. Активно выступал против войны, против применения ядерного оружия, за гуманизм, уважение прав человека, взаимопонимание между народами. Эйнштейну принадлежит решающая роль в популяризации и введении в научный оборот новых физических концепций и теорий. В первую очередь это относится к пересмотру понимания физической сущности пространства и времени и к построению новой теории гравитации взамен ньютоновской. Эйнштейн также, вместе с Планком, заложил основы квантовой теории. Эти концепции, многократно подтверждённые экспериментами, образуют фундамент современной физики."
            },
            new PersonData()
            {
                Id = 2,
                PersonId = 1,
                TopicTitle = "Изобретение 1",
                Context = "asidhf;ahweifohn;zskonguzs;bghajhsgh;nlasjiofgahГерманская империя — 18 апреля 1955, Принстон, штат Нью-Джерси, США) —uhdlkfga"
            },
            new PersonData()
            {
                Id = 3,
                PersonId = 1,
                TopicTitle = "Изобретение 2",
                Context = "asidhГерманская империя — 18 апреля 1955, Принстон, штат Нью-Джерси, США) —f;ahweifohn;zskonguzs;bghajhsgh;nlasjiofgahuhdlkfga"
            },
            new PersonData()
            {
                Id = 4,
                PersonId = 1,
                TopicTitle = "Достижение 1",
                Context = "asidhf;ahweifohn;zskonguzs;bghajhsgh;nlasjiofgahuhdlkfga"
            },
            new PersonData()
            {
                Id = 4,
                PersonId = 1,
                TopicTitle = "Достижение 2",
                Context = "asidhf;ahweifohn;zskonguzs;bghajhsgh;nlasjiofgahuhdlkfga"
            },
            new PersonData()
            {
                Id = 4,
                PersonId = 1,
                TopicTitle = "Достижение 3",
                Context = "asidhf;ahweifohn;zskonguzs;bghajhsgh;nlasjiofgahuhdlkfga"
            }
        };

        _context = _personDatas.First().Context;
    }

    public void Show()
    {
        _showCatd = _showCatd == "hidden" ? "visible" : "hidden";
        StateHasChanged();
    }

    private void close()
    {
        _showCatd = _showCatd == "hidden" ? "visible" : "hidden";
        StateHasChanged();
    }

    private string _context;
    public void OnShowDataClick(string context)
    {
        _context = context;
    }
}
